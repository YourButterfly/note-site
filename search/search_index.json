{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u5982\u4f55\u4f7f\u7528 --to\u795e\u83b1 \u73af\u5883 os: linux 64\u4f4d tools: pip3 mkdocs mkdocs-material git language: python3 go python pip3 \u5b89\u88c5 \u7565 mkdocs mkdocs-material\u5b89\u88c5 sudo pip3 install mkdocs mkdocs-material mkdocs-material \u662f\u4e3b\u9898 mkdocs \u642d\u5efa git clone git clone https://github.com/YourButterfly/note-site.git \u89e3\u91ca\u4e00\u4e0b\u9879\u76ee\u76ee\u5f55 . \u251c\u2500\u2500 docs //md\u6587\u6863\uff0c\u7528\u6765\u5199\u7684 \u2502 \u251c\u2500\u2500 index.md \u2502 \u2514\u2500\u2500 pdf \u2502 \u251c\u2500\u2500 introduce.md \u2502 \u2514\u2500\u2500 page-boxes.md \u251c\u2500\u2500 LICENSE //\u4e0d\u7528\u7ba1 \u2514\u2500\u2500 mkdocs.yml // mkdoc\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5927\u90e8\u5206\u5df2\u7ecf\u5f04\u597d\u4e86 2 directories, 5 files \u4ecb\u7ecd\u4e00\u4e0bmkdocs\u547d\u4ee4 $ mkdocs -h Commands: build Build the MkDocs documentation\uff0c\u8fd9\u91cc\u4e0d\u9700\u8981 gh-deploy Deploy your documentation to GitHub Pages\uff0c\u63a8\u9001\u5230github\uff0c\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86\uff0c\u76f4\u63a5\u7528\u2018mkdocs gh-deploy\u2019 new Create a new MkDocs project\uff0c\u8fd9\u91cc\u4e0d\u9700\u8981 serve Run the builtin development server\uff0c\u9884\u89c8\u9875\u9762 \u7f16\u5199\u6587\u6863 \u5199\u4e4b\u524dpull\u4e00\u4e0b\uff0c\u5728\u9879\u76ee\u4e3b\u76ee\u5f55\uff08note-site\uff09\u91cc git pull \uff0c\u9632\u6b62\u51b2\u7a81 \u5199 \u5728docs\u4e0b\u521b\u5efa\u76ee\u5f55\uff0c\u6bd4\u5982pdf\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u7c7b\u522b \u5728docs/pdf\u4e0b\u521b\u5efa\u4f60\u7684\u6587\u6863\uff0cmd\u683c\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u521b\u5efa\u76ee\u5f55\uff0c\u4f5c\u4e3a\u4f60\u7684tag \u914d\u7f6e \u914d\u7f6emkdocs.yml\uff0c\u914d\u7f6e\u89c1\u4e0b \u63a8\u9001 \u4fdd\u5b58\u4e00\u4e0b\u9879\u76eegit add\uff0cgit commit \uff0cgit push \u63a8\u9001\u5230gh-deploy\u5206\u652f\u4e0a\uff0c\u76f4\u63a5 mkdocs gh-deploy \u914d\u7f6emkdocs.yml \u7167\u7740\u52a0\u5c31\u884c nav: - \u9996\u9875: index.md - \u6587\u4ef6\u683c\u5f0f: - PDF: - \u7b80\u4ecb: pdf/introduce.md - PageBox: pdf/page-boxes.md \u9884\u89c8 mkdocs serve \u63a8\u9001 $ mkdocs gh-deploy INFO - Cleaning site directory INFO - Building documentation to directory: /home/pwd/myMkDocs/first-project/site INFO - Copying '/home/pwd/myMkDocs/first-project/site' to 'gh-pages' branch and pushing to GitHub. Username for 'https://github.com': yourbutterfly Password for 'https://yourbutterfly@github.com': INFO - Your documentation should shortly be available at: https://YourButterfly.github.io/note-site/","title":"\u9996\u9875"},{"location":"#_1","text":"--to\u795e\u83b1","title":"\u5982\u4f55\u4f7f\u7528"},{"location":"#_2","text":"os: linux 64\u4f4d tools: pip3 mkdocs mkdocs-material git language: python3","title":"\u73af\u5883"},{"location":"#go","text":"","title":"go"},{"location":"#python-pip3","text":"\u7565","title":"python pip3 \u5b89\u88c5"},{"location":"#mkdocs-mkdocs-material","text":"sudo pip3 install mkdocs mkdocs-material mkdocs-material \u662f\u4e3b\u9898","title":"mkdocs mkdocs-material\u5b89\u88c5"},{"location":"#mkdocs","text":"git clone git clone https://github.com/YourButterfly/note-site.git \u89e3\u91ca\u4e00\u4e0b\u9879\u76ee\u76ee\u5f55 . \u251c\u2500\u2500 docs //md\u6587\u6863\uff0c\u7528\u6765\u5199\u7684 \u2502 \u251c\u2500\u2500 index.md \u2502 \u2514\u2500\u2500 pdf \u2502 \u251c\u2500\u2500 introduce.md \u2502 \u2514\u2500\u2500 page-boxes.md \u251c\u2500\u2500 LICENSE //\u4e0d\u7528\u7ba1 \u2514\u2500\u2500 mkdocs.yml // mkdoc\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5927\u90e8\u5206\u5df2\u7ecf\u5f04\u597d\u4e86 2 directories, 5 files \u4ecb\u7ecd\u4e00\u4e0bmkdocs\u547d\u4ee4 $ mkdocs -h Commands: build Build the MkDocs documentation\uff0c\u8fd9\u91cc\u4e0d\u9700\u8981 gh-deploy Deploy your documentation to GitHub Pages\uff0c\u63a8\u9001\u5230github\uff0c\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86\uff0c\u76f4\u63a5\u7528\u2018mkdocs gh-deploy\u2019 new Create a new MkDocs project\uff0c\u8fd9\u91cc\u4e0d\u9700\u8981 serve Run the builtin development server\uff0c\u9884\u89c8\u9875\u9762","title":"mkdocs \u642d\u5efa"},{"location":"#_3","text":"\u5199\u4e4b\u524dpull\u4e00\u4e0b\uff0c\u5728\u9879\u76ee\u4e3b\u76ee\u5f55\uff08note-site\uff09\u91cc git pull \uff0c\u9632\u6b62\u51b2\u7a81 \u5199 \u5728docs\u4e0b\u521b\u5efa\u76ee\u5f55\uff0c\u6bd4\u5982pdf\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u7c7b\u522b \u5728docs/pdf\u4e0b\u521b\u5efa\u4f60\u7684\u6587\u6863\uff0cmd\u683c\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u521b\u5efa\u76ee\u5f55\uff0c\u4f5c\u4e3a\u4f60\u7684tag \u914d\u7f6e \u914d\u7f6emkdocs.yml\uff0c\u914d\u7f6e\u89c1\u4e0b \u63a8\u9001 \u4fdd\u5b58\u4e00\u4e0b\u9879\u76eegit add\uff0cgit commit \uff0cgit push \u63a8\u9001\u5230gh-deploy\u5206\u652f\u4e0a\uff0c\u76f4\u63a5 mkdocs gh-deploy \u914d\u7f6emkdocs.yml \u7167\u7740\u52a0\u5c31\u884c nav: - \u9996\u9875: index.md - \u6587\u4ef6\u683c\u5f0f: - PDF: - \u7b80\u4ecb: pdf/introduce.md - PageBox: pdf/page-boxes.md \u9884\u89c8 mkdocs serve \u63a8\u9001 $ mkdocs gh-deploy INFO - Cleaning site directory INFO - Building documentation to directory: /home/pwd/myMkDocs/first-project/site INFO - Copying '/home/pwd/myMkDocs/first-project/site' to 'gh-pages' branch and pushing to GitHub. Username for 'https://github.com': yourbutterfly Password for 'https://yourbutterfly@github.com': INFO - Your documentation should shortly be available at: https://YourButterfly.github.io/note-site/","title":"\u7f16\u5199\u6587\u6863"},{"location":"dot/introduce/","text":"dot 123","title":"\u7b80\u4ecb"},{"location":"dot/introduce/#dot","text":"123","title":"dot"},{"location":"dot/language/","text":"DOT \u8bed\u8a00 Dot \u8bed\u8a00\u7684\u62bd\u8c61\u8bed\u6cd5 graph:[ strict ] (graph | digraph) [ ID ] '{' stmt_list '}' stmt_list:[ stmt [ ';' ] stmt_list ] stmt:node_stmt |edge_stmt |attr_stmt |ID '=' ID |subgraph attr_stmt:(graph | node | edge) attr_list attr_list:'[' [ a_list ] ']' [ attr_list ] a_list:ID '=' ID [ (';' | ',') ] [ a_list ] edge_stmt:(node_id | subgraph) edgeRHS [ attr_list ] edgeRHS:edgeop (node_id | subgraph) [ edgeRHS ] node_stmt:node_id [ attr_list ] node_id:ID [ port ] port:':' ID [ ':' compass_pt ] |':' compass_pt subgraph:[ subgraph [ ID ] ] '{' stmt_list '}' compass_pt:(n | ne | e | se | s | sw | w | nw | c | _) \u5173\u952e\u5b57node\uff0cedge\uff0cgraph\uff0cdigraph\uff0csubgraph\u548cstrict\u4e0e\u5927\u5c0f\u5199\u65e0\u5173 '('\u548c')'\u8868\u793a\u5fc5\u9009\u7ec4\uff0c\u5982(graph | digraph)'\u8868\u793agraph\u548cdigraph\u4e24\u8005\u6709\u4e14\u53ea\u6709\u5176\u4e00 \u5355\u5f15\u53f7\u8868\u793a\u5185\u5bb9\u662f\u5b57\u7b26\uff0c\u5982'='\u4fbf\u662f\u5b57\u7b26'='\uff0c\u800c\u4e0d\u662f\u8d4b\u503c","title":"Dot\u8bed\u8a00"},{"location":"dot/language/#dot","text":"Dot \u8bed\u8a00\u7684\u62bd\u8c61\u8bed\u6cd5 graph:[ strict ] (graph | digraph) [ ID ] '{' stmt_list '}' stmt_list:[ stmt [ ';' ] stmt_list ] stmt:node_stmt |edge_stmt |attr_stmt |ID '=' ID |subgraph attr_stmt:(graph | node | edge) attr_list attr_list:'[' [ a_list ] ']' [ attr_list ] a_list:ID '=' ID [ (';' | ',') ] [ a_list ] edge_stmt:(node_id | subgraph) edgeRHS [ attr_list ] edgeRHS:edgeop (node_id | subgraph) [ edgeRHS ] node_stmt:node_id [ attr_list ] node_id:ID [ port ] port:':' ID [ ':' compass_pt ] |':' compass_pt subgraph:[ subgraph [ ID ] ] '{' stmt_list '}' compass_pt:(n | ne | e | se | s | sw | w | nw | c | _) \u5173\u952e\u5b57node\uff0cedge\uff0cgraph\uff0cdigraph\uff0csubgraph\u548cstrict\u4e0e\u5927\u5c0f\u5199\u65e0\u5173 '('\u548c')'\u8868\u793a\u5fc5\u9009\u7ec4\uff0c\u5982(graph | digraph)'\u8868\u793agraph\u548cdigraph\u4e24\u8005\u6709\u4e14\u53ea\u6709\u5176\u4e00 \u5355\u5f15\u53f7\u8868\u793a\u5185\u5bb9\u662f\u5b57\u7b26\uff0c\u5982'='\u4fbf\u662f\u5b57\u7b26'='\uff0c\u800c\u4e0d\u662f\u8d4b\u503c","title":"DOT \u8bed\u8a00"},{"location":"honggfuzz/netdriver-introduce/","text":"Honggfuzz NetDriver \u5982\u679c\u6211\u4eec\u8981\u5b9e\u73b0\u4e00\u4e2a\u76f8\u5f53\u5065\u58ee\u7684TCP\u670d\u52a1\u7684fuzzing\uff0c\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u6807\u9700\u8981\u505a\u5230\u54ea\u4e9b \u80fd\u4e0e\u73b0\u6709TCP\u670d\u52a1\u96c6\u6210\u7684\u4e00\u5c0f\u6bb5\u4ee3\u7801\uff0c\u6bd4\u5982\u8bf4\uff0c\u4e00\u4e2a\u80fd\u591f\u88abApache\u7684HTTP\u94fe\u63a5\u7684\u9759\u6001\u6216\u52a8\u6001\u5e93\uff0c\uff08\u8fd9\u91cc\u53ef\u4ee5\u4f7fhttpd\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u7a0b\u5e8f\uff09 \u5c06\u6765\u81ea\u5185\u5b58\u6570\u7ec4\u548c\u957f\u5ea6\u6807\u8bc6\u7684\u8f93\u5165\u8f6c\u6210TCP\u6d41\u7684\u6280\u672f \u5f53\u8f93\u5165\u7f13\u51b2\u533a\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u65f6\uff0c\u6709\u65b9\u6cd5\u53bb\u901a\u77e5TCP \u670d\u52a1\u7aef\u7ed3\u675f\u8fde\u63a5\uff1b\u5426\u5219TCP\u670d\u52a1\u7aef\u5c06\u4e00\u76f4\u6302\u8d77\uff0c\u6216\u8005\u8d85\u65f6\u4e2d\u65ad\u8fde\u63a5\uff0c\u6216\u8005\u8d85\u8fc7fuzzer\u8bbe\u5b9a\u7684timeout \u5982\u679c\u8bb8\u591a\u76f8\u540c\u7684TCP\u670d\u52a1\u5668\u540c\u65f6\u5728\u76f8\u540c\u7684\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u914d\u7f6e\u76f8\u540c(\u6216\u8005\u9ed8\u8ba4\u914d\u7f6e)\uff0c\u90a3\u4e48\u5b83\u4eec\u4e5f\u4f1a\u7ed1\u5b9a\u5230\u6570\u5b57\u4e0a\u76f8\u540c\u7684TCP\u7aef\u53e3\u3002\u5f53\u7136\uff0c\u53ea\u6709\u5f53\u6211\u4eec\u6253\u7b97\u540c\u65f6Fuzz\u540c\u4e00\u4e2aTCP\u670d\u52a1\u5668\u7684\u591a\u4e2a\u5b9e\u4f8b\u65f6\uff0c\u8fd9\u624d\u91cd\u8981(\u4f7f\u7528honggfuzz\u53ef\u4ee5\u8f7b\u677e\u505a\u5230\u4ec0\u4e48) \u6700\u8fd1\u5728Honggfuzz\u7684\u4ee3\u7801\u5e93\u4e2d\u5f15\u5165\u7684Honggfuzz\u7f51\u7edc\u9a71\u52a8\u7a0b\u5e8f\u5c31\u8bd5\u56fe\u5b9e\u73b0\u8fd9\u4e9b\u3002 \u9759\u6001\u5e93 [libfhnetdriver/libhfnetdriver.a] \u6e90\u4ee3\u7801 \u9a71\u52a8\u7a0b\u5e8f\u5c06\u81ea\u5df1\u4f5c\u4e3a\u76ee\u6807(\u63d0\u4f9b\u7b26\u53f7)\u63d2\u5165\u5230\u6700\u521d\u7531libFuzzer\u4f5c\u8005\u5b9e\u73b0\u7684\u63a5\u53e3\u4e2d: int LLVMFuzzerTestOneInput(const uint8_t* buf, size_t len); \u8fd9\u79cd\u9009\u62e9\u4f7f\u5f97\u4e0d\u4ec5\u53ef\u4ee5\u5728honggfuzz\u4e2d\u4f7f\u7528\u8be5\u9a71\u52a8\u7a0b\u5e8f\uff0c\u8fd8\u53ef\u4ee5\u5728AFL\u548clibFuzzer\u4e2d\u4f7f\u7528\u8be5\u9a71\u52a8\u7a0b\u5e8f\u3002\u4ece\u73b0\u5728\u5f00\u59cb\uff0cApache HTTPD\u9879\u76ee\u9700\u8981\u505a\u7684\u552f\u4e00\u4fee\u6539\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u4ee5\u4e0b\u5dee\u5f02: --- a/server/main.c +++ b/server/main.c @@ -484,8 +484,11 @@ static void usage(process_rec *process) destroy_and_exit_process(process, 1); } -int main(int argc, const char * const argv[]) -{ +#ifdef HFND_FUZZING_ENTRY_FUNCTION + HFND_FUZZING_ENTRY_FUNCTION(int argc, const char *const *argv) { +#else + int main(int argc, const char *const *argv) { +#endif char c; int showcompile = 0, showdirectives = 0; const char *confname = SERVER_CONFIG_FILE; \u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\u4e4b\u540e\uff0c main() (\u5c5e\u4e8eApache HTTPD \u4e2dserver/main.c)\u4f1a\u88ab\u7f16\u8bd1\u5668hfuzz-cc\u4e2d\u7684\u5b8f\u66ff\u4ee3\uff08'-D'\u5b9a\u4e49\u5b8f\uff09\uff0c\u8fd9\u4e2a\u6269\u5c55\u5b8f\u5bf9HonggFuzz NetDriver\u6709\u7279\u6b8a\u610f\u4e49--\u8bc6\u522b\u4e3aApache HTTPD\u670d\u52a1\u5668\u4ee3\u7801\u7684\u539f\u59cb\u5165\u53e3\u70b9\u7684\u4f4d\u7f6e \u5728\u5c06TCP server \u94fe\u63a5\u9759\u6001\u5e93libhfnetdriver.a(\u8fd9\u4e00\u6b65\u7531hfuzz-cc/*\u7f16\u8bd1\u5668\u6267\u884c)\u4e4b\u540e\uff0cfuzz\u5f15\u64ce\u4f1a\u8fd0\u884c\u81ea\u5df1\u7684main\u51fd\u6570\uff0c\u7136\u540e\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u7ebf\u7a0b\u4e2d\u8fd0\u884cTCP\u670d\u52a1\u7aef\u4ee3\u7801 \u4e4b\u524d\u63d0\u5230\u7684TCP server \u63a5\u53d7\u5230\u8f93\u5165\u7ed3\u675f\u7684\u4fe1\u53f7\u95ee\u9898\uff08\u6bd4\u5982\u8bf4\u5728fuzzing\u8f93\u5165\u7f13\u51b2\u4e2d\u4e0d\u518d\u6709\u6570\u636e\u65f6\uff0c\u5982\u4f55\u901a\u77e5\u5230TCP server\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u5411\u5176\u5efa\u7acb\u7684tcp\u6d41\u4e2d\u53d1\u9001TCP FIN \u5305\u3002\u5728\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0cshutdown(sock, SHUT_WR)\u8fd9\u4e2asyscall\u5b8c\u6210\u4e86\u8fd9\u4e2a\u5de5\u4f5c \u6211\u4eec\u8981\u89e3\u51b3\u7684\u6700\u540e\u4e00\u4e2a\u8981\u6c42\u662f\uff0c\u80fd\u591f\u4f7f\u7528\u76f8\u540c\u7684TCP\u7aef\u53e3\u542f\u52a8\u591a\u4e2aTCP\u670d\u52a1\u5668\u3002\u5f88\u9057\u61be\uff0csetsockopt(SO_REUSEPORT)\u4e0d\u80fd\u7528\u5728\u8fd9\uff0c\u56e0\u4e3a\u6df7\u4e71\u7684\u8f93\u5165\u53ef\u4ee5\u5206\u53d1\u5230\u968f\u673a\u7684fuzz\u8fdb\u7a0b\u7684\u5b9e\u4f8b\uff0c\u4e0d\u8fc7\u8fd9\u91cc\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\uff1a Linux network namespaces\uff0c\u6b63\u5982\u5b83\u7684\u540d\u5b57\u6240\u8bf4\uff0c\u53ea\u80fd\u7528\u5728linux\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u3002\u5728\u4e0d\u540c\u7684\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4\u4e2d\u8fd0\u884c\u6bcf\u4e2a\u65b0\u7684TCP\u670d\u52a1\u5668\u5141\u8bb8\u5b83\u7ed1\u5b9a\u5230\u4efb\u4f55\u5b83\u5e0c\u671b\u7684TCP\u7aef\u53e3\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u670d\u52a1\u5668\u90fd\u5c06\u770b\u5230\u5c5e\u4e8e\u81ea\u5df1\u7684\u5168\u65b0loopback\u63a5\u53e3\u3002NetDriver \u5229\u7528Linux namespace\u7684\u4ee3\u7801\u53ef\u4ee5\u5728HonggFuzz\u7684libhfcommin\u5e93\u4e2d\u53d1\u73b0\u3002 \u4e00\u65e6TCP server \u542f\u52a8\u5e76\u63a5\u53d7\u65b0\u7684TCP\u8fde\u63a5\uff0cnet dirver \u5c06\uff1a \u5728\u4f60\u9009\u62e9\u7684Fuzzer\u7684\u51c6\u5907\u9636\u6bb5\u8c03\u7528LLVMFuzzerTestOneInput()\u63a5\u53e3\uff1b \u8fde\u63a5TCP server\uff0c \u5411\u5efa\u7acb\u7684TCP\u8fde\u63a5\u53d1\u9001\uff08send()\uff09\u8f93\u5165, \u4f7f\u7528shutdown(sock, SHUT_WR) \u901a\u77e5TCP server \u6ca1\u6709\u66f4\u591a\u7684\u8f93\u5165\u6570\u636e\uff0c \u7b49\u5f85TCP server\u5411\u6211\u4eec\u53d1\u9001\u6570\u636e\uff0c\u76f4\u5230\u5b83\u5173\u95edTCP\u8fde\u63a5\u7684\u4e00\u7aef\u4e3a\u6b62\u3002 \u5173\u95ed\u5ba2\u6237\u7aef\u7684TCP\u8fde\u63a5\u70b9\uff0c \u91cd\u590d\u4e0a\u8ff0\u8fc7\u7a0b \u4e0b\u9762\u7684\u547d\u4ee4\u96c6\u5c06\u5e2e\u52a9\u60a8\u5f00\u59cb\u4f7f\u7528NetDriver\u6765Fuzz\u60a8\u7684\u7b2c\u4e00\u4e2a\u9879\u76ee(\u81f3\u5c11\u5bf9\u4e8eApache HTTPD\u6765\u8bf4)\u3002 $ ( cd httpd && ./hfuzz.compile_and_install.asan.sh ) $ honggfuzz -v -Q -f IN/ -w ./httpd.wordlist -- ./httpd/httpd -X -f /home/jagger/fuzz/apache/dist/conf/httpd.conf.h2 ... ... Honggfuzz Net Driver (pid=21726): Waiting for the TCP server process to start accepting TCP connections at 127.0.0.1:8080. Sleeping for 1 second.... Honggfuzz Net Driver (pid=21726): The TCP server process is ready to accept connections at 127.0.0.1:8080. TCP fuzzing starts now! Size:9378 (i,b,hw,edge,ip,cmp): 0/0/0/4643/110/56364, Tot:0/0/0/4643/110/56364 Size:40712 (i,b,hw,edge,ip,cmp): 0/0/0/1971/104/21274, Tot:0/0/0/6614/214/77638 ... \u5728\u8fd9\u4e2ahonggfuzz\u76ee\u5f55\u4e2d\u53ef\u4ee5\u627e\u5230\u81ea\u5b9a\u4e49\u7f16\u8bd1\u811a\u672c\uff0c\u4ee5\u53caApache HTTPD\u670d\u52a1\u5668\u6240\u9700\u7684\u6240\u6709\u8865\u4e01\u3001\u914d\u7f6e\u548c\u521d\u59cb\u8bed\u6599\u5e93\u6587\u4ef6\u3002 \u6211\u8ba4\u4e3a\u5c06\u7f51\u7edc\u9a71\u52a8\u7a0b\u5e8f\u4e0elibFuzzer\u548cAFL fuzzing\u8bbe\u7f6e\u96c6\u6210\u8d77\u6765\u5e94\u8be5\u662f\u4e00\u9879\u76f8\u5bf9\u7b80\u5355\u7684\u4efb\u52a1\u3002","title":"netdriver-introduce"},{"location":"honggfuzz/netdriver-introduce/#honggfuzz-netdriver","text":"\u5982\u679c\u6211\u4eec\u8981\u5b9e\u73b0\u4e00\u4e2a\u76f8\u5f53\u5065\u58ee\u7684TCP\u670d\u52a1\u7684fuzzing\uff0c\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u6807\u9700\u8981\u505a\u5230\u54ea\u4e9b \u80fd\u4e0e\u73b0\u6709TCP\u670d\u52a1\u96c6\u6210\u7684\u4e00\u5c0f\u6bb5\u4ee3\u7801\uff0c\u6bd4\u5982\u8bf4\uff0c\u4e00\u4e2a\u80fd\u591f\u88abApache\u7684HTTP\u94fe\u63a5\u7684\u9759\u6001\u6216\u52a8\u6001\u5e93\uff0c\uff08\u8fd9\u91cc\u53ef\u4ee5\u4f7fhttpd\u8fd9\u4e2a\u4e8c\u8fdb\u5236\u7a0b\u5e8f\uff09 \u5c06\u6765\u81ea\u5185\u5b58\u6570\u7ec4\u548c\u957f\u5ea6\u6807\u8bc6\u7684\u8f93\u5165\u8f6c\u6210TCP\u6d41\u7684\u6280\u672f \u5f53\u8f93\u5165\u7f13\u51b2\u533a\u6ca1\u6709\u4efb\u4f55\u6570\u636e\u65f6\uff0c\u6709\u65b9\u6cd5\u53bb\u901a\u77e5TCP \u670d\u52a1\u7aef\u7ed3\u675f\u8fde\u63a5\uff1b\u5426\u5219TCP\u670d\u52a1\u7aef\u5c06\u4e00\u76f4\u6302\u8d77\uff0c\u6216\u8005\u8d85\u65f6\u4e2d\u65ad\u8fde\u63a5\uff0c\u6216\u8005\u8d85\u8fc7fuzzer\u8bbe\u5b9a\u7684timeout \u5982\u679c\u8bb8\u591a\u76f8\u540c\u7684TCP\u670d\u52a1\u5668\u540c\u65f6\u5728\u76f8\u540c\u7684\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u914d\u7f6e\u76f8\u540c(\u6216\u8005\u9ed8\u8ba4\u914d\u7f6e)\uff0c\u90a3\u4e48\u5b83\u4eec\u4e5f\u4f1a\u7ed1\u5b9a\u5230\u6570\u5b57\u4e0a\u76f8\u540c\u7684TCP\u7aef\u53e3\u3002\u5f53\u7136\uff0c\u53ea\u6709\u5f53\u6211\u4eec\u6253\u7b97\u540c\u65f6Fuzz\u540c\u4e00\u4e2aTCP\u670d\u52a1\u5668\u7684\u591a\u4e2a\u5b9e\u4f8b\u65f6\uff0c\u8fd9\u624d\u91cd\u8981(\u4f7f\u7528honggfuzz\u53ef\u4ee5\u8f7b\u677e\u505a\u5230\u4ec0\u4e48) \u6700\u8fd1\u5728Honggfuzz\u7684\u4ee3\u7801\u5e93\u4e2d\u5f15\u5165\u7684Honggfuzz\u7f51\u7edc\u9a71\u52a8\u7a0b\u5e8f\u5c31\u8bd5\u56fe\u5b9e\u73b0\u8fd9\u4e9b\u3002 \u9759\u6001\u5e93 [libfhnetdriver/libhfnetdriver.a] \u6e90\u4ee3\u7801 \u9a71\u52a8\u7a0b\u5e8f\u5c06\u81ea\u5df1\u4f5c\u4e3a\u76ee\u6807(\u63d0\u4f9b\u7b26\u53f7)\u63d2\u5165\u5230\u6700\u521d\u7531libFuzzer\u4f5c\u8005\u5b9e\u73b0\u7684\u63a5\u53e3\u4e2d: int LLVMFuzzerTestOneInput(const uint8_t* buf, size_t len); \u8fd9\u79cd\u9009\u62e9\u4f7f\u5f97\u4e0d\u4ec5\u53ef\u4ee5\u5728honggfuzz\u4e2d\u4f7f\u7528\u8be5\u9a71\u52a8\u7a0b\u5e8f\uff0c\u8fd8\u53ef\u4ee5\u5728AFL\u548clibFuzzer\u4e2d\u4f7f\u7528\u8be5\u9a71\u52a8\u7a0b\u5e8f\u3002\u4ece\u73b0\u5728\u5f00\u59cb\uff0cApache HTTPD\u9879\u76ee\u9700\u8981\u505a\u7684\u552f\u4e00\u4fee\u6539\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u4ee5\u4e0b\u5dee\u5f02: --- a/server/main.c +++ b/server/main.c @@ -484,8 +484,11 @@ static void usage(process_rec *process) destroy_and_exit_process(process, 1); } -int main(int argc, const char * const argv[]) -{ +#ifdef HFND_FUZZING_ENTRY_FUNCTION + HFND_FUZZING_ENTRY_FUNCTION(int argc, const char *const *argv) { +#else + int main(int argc, const char *const *argv) { +#endif char c; int showcompile = 0, showdirectives = 0; const char *confname = SERVER_CONFIG_FILE; \u5e94\u7528\u8fd9\u4e2a\u8865\u4e01\u4e4b\u540e\uff0c main() (\u5c5e\u4e8eApache HTTPD \u4e2dserver/main.c)\u4f1a\u88ab\u7f16\u8bd1\u5668hfuzz-cc\u4e2d\u7684\u5b8f\u66ff\u4ee3\uff08'-D'\u5b9a\u4e49\u5b8f\uff09\uff0c\u8fd9\u4e2a\u6269\u5c55\u5b8f\u5bf9HonggFuzz NetDriver\u6709\u7279\u6b8a\u610f\u4e49--\u8bc6\u522b\u4e3aApache HTTPD\u670d\u52a1\u5668\u4ee3\u7801\u7684\u539f\u59cb\u5165\u53e3\u70b9\u7684\u4f4d\u7f6e \u5728\u5c06TCP server \u94fe\u63a5\u9759\u6001\u5e93libhfnetdriver.a(\u8fd9\u4e00\u6b65\u7531hfuzz-cc/*\u7f16\u8bd1\u5668\u6267\u884c)\u4e4b\u540e\uff0cfuzz\u5f15\u64ce\u4f1a\u8fd0\u884c\u81ea\u5df1\u7684main\u51fd\u6570\uff0c\u7136\u540e\u5728\u4e00\u4e2a\u5355\u72ec\u7684\u7ebf\u7a0b\u4e2d\u8fd0\u884cTCP\u670d\u52a1\u7aef\u4ee3\u7801 \u4e4b\u524d\u63d0\u5230\u7684TCP server \u63a5\u53d7\u5230\u8f93\u5165\u7ed3\u675f\u7684\u4fe1\u53f7\u95ee\u9898\uff08\u6bd4\u5982\u8bf4\u5728fuzzing\u8f93\u5165\u7f13\u51b2\u4e2d\u4e0d\u518d\u6709\u6570\u636e\u65f6\uff0c\u5982\u4f55\u901a\u77e5\u5230TCP server\uff09\uff0c\u53ef\u4ee5\u901a\u8fc7\u5411\u5176\u5efa\u7acb\u7684tcp\u6d41\u4e2d\u53d1\u9001TCP FIN \u5305\u3002\u5728\u73b0\u4ee3\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0cshutdown(sock, SHUT_WR)\u8fd9\u4e2asyscall\u5b8c\u6210\u4e86\u8fd9\u4e2a\u5de5\u4f5c \u6211\u4eec\u8981\u89e3\u51b3\u7684\u6700\u540e\u4e00\u4e2a\u8981\u6c42\u662f\uff0c\u80fd\u591f\u4f7f\u7528\u76f8\u540c\u7684TCP\u7aef\u53e3\u542f\u52a8\u591a\u4e2aTCP\u670d\u52a1\u5668\u3002\u5f88\u9057\u61be\uff0csetsockopt(SO_REUSEPORT)\u4e0d\u80fd\u7528\u5728\u8fd9\uff0c\u56e0\u4e3a\u6df7\u4e71\u7684\u8f93\u5165\u53ef\u4ee5\u5206\u53d1\u5230\u968f\u673a\u7684fuzz\u8fdb\u7a0b\u7684\u5b9e\u4f8b\uff0c\u4e0d\u8fc7\u8fd9\u91cc\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\uff1a Linux network namespaces\uff0c\u6b63\u5982\u5b83\u7684\u540d\u5b57\u6240\u8bf4\uff0c\u53ea\u80fd\u7528\u5728linux\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u3002\u5728\u4e0d\u540c\u7684\u7f51\u7edc\u540d\u79f0\u7a7a\u95f4\u4e2d\u8fd0\u884c\u6bcf\u4e2a\u65b0\u7684TCP\u670d\u52a1\u5668\u5141\u8bb8\u5b83\u7ed1\u5b9a\u5230\u4efb\u4f55\u5b83\u5e0c\u671b\u7684TCP\u7aef\u53e3\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u670d\u52a1\u5668\u90fd\u5c06\u770b\u5230\u5c5e\u4e8e\u81ea\u5df1\u7684\u5168\u65b0loopback\u63a5\u53e3\u3002NetDriver \u5229\u7528Linux namespace\u7684\u4ee3\u7801\u53ef\u4ee5\u5728HonggFuzz\u7684libhfcommin\u5e93\u4e2d\u53d1\u73b0\u3002 \u4e00\u65e6TCP server \u542f\u52a8\u5e76\u63a5\u53d7\u65b0\u7684TCP\u8fde\u63a5\uff0cnet dirver \u5c06\uff1a \u5728\u4f60\u9009\u62e9\u7684Fuzzer\u7684\u51c6\u5907\u9636\u6bb5\u8c03\u7528LLVMFuzzerTestOneInput()\u63a5\u53e3\uff1b \u8fde\u63a5TCP server\uff0c \u5411\u5efa\u7acb\u7684TCP\u8fde\u63a5\u53d1\u9001\uff08send()\uff09\u8f93\u5165, \u4f7f\u7528shutdown(sock, SHUT_WR) \u901a\u77e5TCP server \u6ca1\u6709\u66f4\u591a\u7684\u8f93\u5165\u6570\u636e\uff0c \u7b49\u5f85TCP server\u5411\u6211\u4eec\u53d1\u9001\u6570\u636e\uff0c\u76f4\u5230\u5b83\u5173\u95edTCP\u8fde\u63a5\u7684\u4e00\u7aef\u4e3a\u6b62\u3002 \u5173\u95ed\u5ba2\u6237\u7aef\u7684TCP\u8fde\u63a5\u70b9\uff0c \u91cd\u590d\u4e0a\u8ff0\u8fc7\u7a0b \u4e0b\u9762\u7684\u547d\u4ee4\u96c6\u5c06\u5e2e\u52a9\u60a8\u5f00\u59cb\u4f7f\u7528NetDriver\u6765Fuzz\u60a8\u7684\u7b2c\u4e00\u4e2a\u9879\u76ee(\u81f3\u5c11\u5bf9\u4e8eApache HTTPD\u6765\u8bf4)\u3002 $ ( cd httpd && ./hfuzz.compile_and_install.asan.sh ) $ honggfuzz -v -Q -f IN/ -w ./httpd.wordlist -- ./httpd/httpd -X -f /home/jagger/fuzz/apache/dist/conf/httpd.conf.h2 ... ... Honggfuzz Net Driver (pid=21726): Waiting for the TCP server process to start accepting TCP connections at 127.0.0.1:8080. Sleeping for 1 second.... Honggfuzz Net Driver (pid=21726): The TCP server process is ready to accept connections at 127.0.0.1:8080. TCP fuzzing starts now! Size:9378 (i,b,hw,edge,ip,cmp): 0/0/0/4643/110/56364, Tot:0/0/0/4643/110/56364 Size:40712 (i,b,hw,edge,ip,cmp): 0/0/0/1971/104/21274, Tot:0/0/0/6614/214/77638 ... \u5728\u8fd9\u4e2ahonggfuzz\u76ee\u5f55\u4e2d\u53ef\u4ee5\u627e\u5230\u81ea\u5b9a\u4e49\u7f16\u8bd1\u811a\u672c\uff0c\u4ee5\u53caApache HTTPD\u670d\u52a1\u5668\u6240\u9700\u7684\u6240\u6709\u8865\u4e01\u3001\u914d\u7f6e\u548c\u521d\u59cb\u8bed\u6599\u5e93\u6587\u4ef6\u3002 \u6211\u8ba4\u4e3a\u5c06\u7f51\u7edc\u9a71\u52a8\u7a0b\u5e8f\u4e0elibFuzzer\u548cAFL fuzzing\u8bbe\u7f6e\u96c6\u6210\u8d77\u6765\u5e94\u8be5\u662f\u4e00\u9879\u76f8\u5bf9\u7b80\u5355\u7684\u4efb\u52a1\u3002","title":"Honggfuzz NetDriver"},{"location":"pdf/introduce/","text":"pdf","title":"\u7b80\u4ecb"},{"location":"pdf/introduce/#pdf","text":"","title":"pdf"},{"location":"pdf/page-boxes/","text":"PDF Boxes mediabox, cropbox, bleedbox, trimbox, artbox PDF \u5b9e\u9645\u4e0a\u67095\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u5c3a\u5bf8\uff0c\u800c\u4e0d\u4ec5\u4ec5\u53ea\u6709\u4f60\u6253\u5f00\u5b83\u540e\u770b\u5230\u7684\u5927\u5c0f\u3002 An EPS has only a single BoundingBox but a PDF contains a MediaBox, CropBox, BleedBox, TrimBox and ArtBox. trimbox: \u5728\u6240\u6709\u88c1\u526a\u64cd\u4f5c\u4e4b\u540e,Trimbox \u57fa\u672c\u4e0a\u786e\u5b9a\u4e86\u662f\u5bfc\u51faPDF\u6210\u54c1\u7684\u9875\u9762\u5927\u5c0f\u3002 bleedbox: \u5305\u542b\u4e86trimbox\u548c\u6240\u6709\u7684bleed\u3002 mediabox: \u5305\u542b\u4e86bleedbox\u548c\u4efb\u4f55\u7684crop/bleed/etc...\u6807\u8bb0 cropbox: \u5b83\u6307\u5b9a\u4e86\u67e5\u770b\u5668\u4e2d\u663e\u793a\u7684\u533a\u57df\uff0c\u5728Adobe Reader\u4e2d\uff0c\u6587\u6863\u663e\u793a\u7684\u5927\u5c0f\u5c31\u662fcropbox\u7684\u5927\u5c0f artbox: \u6700\u521d\u7528\u6765\u6307\u5b9a\u827a\u672f\u4f5c\u54c1\u6240\u8986\u76d6\u7684\u533a\u57df\u3002 mediabox \u5bf9\u5927\u90e8\u5206\u7528\u6237\u6765\u8bf4\uff0cmediabox\u5bf9\u5e94\u7740pdf\u9875\u9762\u7684\u5b9e\u9645\u5927\u5c0f\u3002\u4f46\u5728\u7528\u4e8e\u51fa\u7248\u65f6\uff0cmediabox\u5305\u542b\u4e86\u66f4\u591a\u7684\u6709\u7528\u7684\u4fe1\u606f\uff08\u6bd4\u5982\u8bf4bleed\uff0c\u4fee\u5efa\u6807\u8bb0\uff0c\u6587\u4ef6\u540d\uff0c\u65e5\u671f\u7b49\u7b49\uff09\uff0c\u4fbf\u4e8e\u7f16\u8f91\u3002 bleedbox \u5982\u679c\u6587\u6863\u5e03\u5c40\u4e0a\u7684\u4efb\u4f55\u5143\u7d20\u4e0e\u6587\u6863\u8fb9\u7f18\u63a5\u89e6\uff0c\u5219\u4f7f\u7528bleed\u3002bleedbox\u7684\u5927\u5c0f\u4e0d\u540c\u5730\u65b9\u6709\u4e0d\u540c\u7684\u6807\u51c6\uff0c\u5e38\u89c1\u7684\u662f\u6bd4crop\u4e4b\u540e\u6bcf\u6761\u8fb9\u957f3~6mm\u3002 EPS ???","title":"PageBox"},{"location":"pdf/page-boxes/#pdf-boxes","text":"mediabox, cropbox, bleedbox, trimbox, artbox PDF \u5b9e\u9645\u4e0a\u67095\u4e2a\u4e0d\u540c\u7c7b\u578b\u7684\u5c3a\u5bf8\uff0c\u800c\u4e0d\u4ec5\u4ec5\u53ea\u6709\u4f60\u6253\u5f00\u5b83\u540e\u770b\u5230\u7684\u5927\u5c0f\u3002 An EPS has only a single BoundingBox but a PDF contains a MediaBox, CropBox, BleedBox, TrimBox and ArtBox. trimbox: \u5728\u6240\u6709\u88c1\u526a\u64cd\u4f5c\u4e4b\u540e,Trimbox \u57fa\u672c\u4e0a\u786e\u5b9a\u4e86\u662f\u5bfc\u51faPDF\u6210\u54c1\u7684\u9875\u9762\u5927\u5c0f\u3002 bleedbox: \u5305\u542b\u4e86trimbox\u548c\u6240\u6709\u7684bleed\u3002 mediabox: \u5305\u542b\u4e86bleedbox\u548c\u4efb\u4f55\u7684crop/bleed/etc...\u6807\u8bb0 cropbox: \u5b83\u6307\u5b9a\u4e86\u67e5\u770b\u5668\u4e2d\u663e\u793a\u7684\u533a\u57df\uff0c\u5728Adobe Reader\u4e2d\uff0c\u6587\u6863\u663e\u793a\u7684\u5927\u5c0f\u5c31\u662fcropbox\u7684\u5927\u5c0f artbox: \u6700\u521d\u7528\u6765\u6307\u5b9a\u827a\u672f\u4f5c\u54c1\u6240\u8986\u76d6\u7684\u533a\u57df\u3002","title":"PDF Boxes"},{"location":"pdf/page-boxes/#mediabox","text":"\u5bf9\u5927\u90e8\u5206\u7528\u6237\u6765\u8bf4\uff0cmediabox\u5bf9\u5e94\u7740pdf\u9875\u9762\u7684\u5b9e\u9645\u5927\u5c0f\u3002\u4f46\u5728\u7528\u4e8e\u51fa\u7248\u65f6\uff0cmediabox\u5305\u542b\u4e86\u66f4\u591a\u7684\u6709\u7528\u7684\u4fe1\u606f\uff08\u6bd4\u5982\u8bf4bleed\uff0c\u4fee\u5efa\u6807\u8bb0\uff0c\u6587\u4ef6\u540d\uff0c\u65e5\u671f\u7b49\u7b49\uff09\uff0c\u4fbf\u4e8e\u7f16\u8f91\u3002","title":"mediabox"},{"location":"pdf/page-boxes/#bleedbox","text":"\u5982\u679c\u6587\u6863\u5e03\u5c40\u4e0a\u7684\u4efb\u4f55\u5143\u7d20\u4e0e\u6587\u6863\u8fb9\u7f18\u63a5\u89e6\uff0c\u5219\u4f7f\u7528bleed\u3002bleedbox\u7684\u5927\u5c0f\u4e0d\u540c\u5730\u65b9\u6709\u4e0d\u540c\u7684\u6807\u51c6\uff0c\u5e38\u89c1\u7684\u662f\u6bd4crop\u4e4b\u540e\u6bcf\u6761\u8fb9\u957f3~6mm\u3002","title":"bleedbox"}]}